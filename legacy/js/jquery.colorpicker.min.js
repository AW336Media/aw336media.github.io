(function(n){"use strict";n.colorpicker=new function(){this.regional=[];this.regional[""]={ok:"OK",cancel:"Cancel",none:"None",button:"Color",title:"Pick a color",transparent:"Transparent",hsvH:"H",hsvS:"S",hsvV:"V",rgbR:"R",rgbG:"G",rgbB:"B",labL:"L",labA:"a",labB:"b",hslH:"H",hslS:"S",hslL:"L",cmykC:"C",cmykM:"M",cmykY:"Y",cmykK:"K",alphaA:"A"}};var f=0,a='<div class="ui-colorpicker ui-colorpicker-dialog ui-dialog ui-widget ui-widget-content ui-corner-all" style="display: none;"><\/div>',v='<div class="ui-colorpicker ui-colorpicker-inline ui-dialog ui-widget ui-widget-content ui-corner-all"><\/div>',e={full:["header","map","bar","hex","hsv","rgb","alpha","lab","cmyk","preview","swatches","footer"],popup:["map","bar","hex","hsv","rgb","alpha","preview","footer"],draggable:["header","map","bar","hex","hsv","rgb","alpha","preview","footer"],inline:["map","bar","hex","hsv","rgb","alpha","preview"]},s=function(n){var t=Math.round(n).toString(16);return t.length===1&&(t="0"+t),t.toLowerCase()},o={"#HEX":function(n){return t("#rxgxbx",n)},"#HEX3":function(n){var t=o.HEX3(n);return t===!1?!1:"#"+t},HEX:function(n){return t("rxgxbx",n)},HEX3:function(n){var t=n.getRGB(),i=Math.round(t.r*255),r=Math.round(t.g*255),u=Math.round(t.b*255);return i>>>4==(i&=15)&&r>>>4==(r&=15)&&u>>>4==(u&=15)?i.toString(16)+r.toString(16)+u.toString(16):!1},RGB:function(n){return n.getAlpha()>=1?t("rgb(rd,gd,bd)",n):!1},RGBA:function(n){return t("rgba(rd,gd,bd,af)",n)},"RGB%":function(n){return n.getAlpha()>=1?t("rgb(rp%,gp%,bp%)",n):!1},"RGBA%":function(n){return t("rgba(rp%,gp%,bp%,af)",n)},HSL:function(n){return n.getAlpha()>=1?t("hsl(hd,sd,vd)",n):!1},HSLA:function(n){return t("hsla(hd,sd,vd,af)",n)},"HSL%":function(n){return n.getAlpha()>=1?t("hsl(hp%,sp%,vp%)",n):!1},"HSLA%":function(n){return t("hsla(hp%,sp%,vp%,af)",n)},NAME:function(n){return h(n)},EXACT:function(n){return y(n)}},t=function(t,i){var e=this,r=null,u={x:function(n){return s(n*255)},d:function(n){return Math.round(n*255)},f:function(n){return n},p:function(n){return n*100}},f=i.getChannels();return n.isArray(t)||(t=[t]),n.each(t,function(n,t){return o[t]?(r=o[t](i),r===!1):(r=t.replace(/\\?[argbhsvcmykLAB][xdfp]/g,function(n){return n.match(/^\\/)?n.slice(1):u[n.charAt(1)](f[n.charAt(0)])}),!1)}),r},r={black:{r:0,g:0,b:0},dimgray:{r:.41176470588235292,g:.41176470588235292,b:.41176470588235292},gray:{r:.50196078431372548,g:.50196078431372548,b:.50196078431372548},darkgray:{r:.66274509803921566,g:.66274509803921566,b:.66274509803921566},silver:{r:.75294117647058822,g:.75294117647058822,b:.75294117647058822},lightgrey:{r:.82745098039215681,g:.82745098039215681,b:.82745098039215681},gainsboro:{r:.86274509803921573,g:.86274509803921573,b:.86274509803921573},whitesmoke:{r:.96078431372549022,g:.96078431372549022,b:.96078431372549022},white:{r:1,g:1,b:1},rosybrown:{r:.73725490196078436,g:.5607843137254902,b:.5607843137254902},indianred:{r:.803921568627451,g:.36078431372549019,b:.36078431372549019},brown:{r:.6470588235294118,g:.16470588235294117,b:.16470588235294117},firebrick:{r:.69803921568627447,g:.13333333333333333,b:.13333333333333333},lightcoral:{r:.94117647058823528,g:.50196078431372548,b:.50196078431372548},maroon:{r:.50196078431372548,g:0,b:0},darkred:{r:.54509803921568623,g:0,b:0},red:{r:1,g:0,b:0},snow:{r:1,g:.98039215686274506,b:.98039215686274506},salmon:{r:.98039215686274506,g:.50196078431372548,b:.44705882352941179},mistyrose:{r:1,g:.89411764705882357,b:.88235294117647056},tomato:{r:1,g:.38823529411764707,b:.27843137254901962},darksalmon:{r:.9137254901960784,g:.58823529411764708,b:.47843137254901963},orangered:{r:1,g:.27058823529411763,b:0},coral:{r:1,g:.49803921568627452,b:.31372549019607843},lightsalmon:{r:1,g:.62745098039215685,b:.47843137254901963},sienna:{r:.62745098039215685,g:.32156862745098042,b:.17647058823529413},seashell:{r:1,g:.96078431372549022,b:.93333333333333335},chocolate:{r:.82352941176470584,g:.41176470588235292,b:.11764705882352941},saddlebrown:{r:.54509803921568623,g:.27058823529411763,b:.074509803921568626},sandybrown:{r:.95686274509803926,g:.64313725490196083,b:.37647058823529411},peachpuff:{r:1,g:.85490196078431369,b:.72549019607843135},peru:{r:.803921568627451,g:.52156862745098043,b:.24705882352941178},linen:{r:.98039215686274506,g:.94117647058823528,b:.90196078431372551},darkorange:{r:1,g:.5490196078431373,b:0},bisque:{r:1,g:.89411764705882357,b:.7686274509803922},burlywood:{r:.87058823529411766,g:.72156862745098038,b:.52941176470588236},tan:{r:.82352941176470584,g:.70588235294117652,b:.5490196078431373},antiquewhite:{r:.98039215686274506,g:.92156862745098034,b:.84313725490196079},navajowhite:{r:1,g:.87058823529411766,b:.67843137254901964},blanchedalmond:{r:1,g:.92156862745098034,b:.803921568627451},papayawhip:{r:1,g:.93725490196078431,b:.83529411764705885},orange:{r:1,g:.6470588235294118,b:0},moccasin:{r:1,g:.89411764705882357,b:.70980392156862748},wheat:{r:.96078431372549022,g:.87058823529411766,b:.70196078431372544},oldlace:{r:.99215686274509807,g:.96078431372549022,b:.90196078431372551},floralwhite:{r:1,g:.98039215686274506,b:.94117647058823528},goldenrod:{r:.85490196078431369,g:.6470588235294118,b:.12549019607843137},darkgoldenrod:{r:.72156862745098038,g:.52549019607843139,b:.043137254901960784},cornsilk:{r:1,g:.97254901960784312,b:.86274509803921573},gold:{r:1,g:.84313725490196079,b:0},palegoldenrod:{r:.93333333333333335,g:.90980392156862744,b:.66666666666666663},khaki:{r:.94117647058823528,g:.90196078431372551,b:.5490196078431373},lemonchiffon:{r:1,g:.98039215686274506,b:.803921568627451},darkkhaki:{r:.74117647058823533,g:.71764705882352942,b:.41960784313725491},beige:{r:.96078431372549022,g:.96078431372549022,b:.86274509803921573},lightgoldenrodyellow:{r:.98039215686274506,g:.98039215686274506,b:.82352941176470584},olive:{r:.50196078431372548,g:.50196078431372548,b:0},yellow:{r:1,g:1,b:0},lightyellow:{r:1,g:1,b:.8784313725490196},ivory:{r:1,g:1,b:.94117647058823528},olivedrab:{r:.41960784313725491,g:.55686274509803924,b:.13725490196078433},yellowgreen:{r:.60392156862745094,g:.803921568627451,b:.19607843137254902},darkolivegreen:{r:.33333333333333331,g:.41960784313725491,b:.18431372549019609},greenyellow:{r:.67843137254901964,g:1,b:.18431372549019609},lawngreen:{r:.48627450980392156,g:.9882352941176471,b:0},chartreuse:{r:.49803921568627452,g:1,b:0},darkseagreen:{r:.5607843137254902,g:.73725490196078436,b:.5607843137254902},forestgreen:{r:.13333333333333333,g:.54509803921568623,b:.13333333333333333},limegreen:{r:.19607843137254902,g:.803921568627451,b:.19607843137254902},lightgreen:{r:.56470588235294117,g:.93333333333333335,b:.56470588235294117},palegreen:{r:.596078431372549,g:.984313725490196,b:.596078431372549},darkgreen:{r:0,g:.39215686274509803,b:0},green:{r:0,g:.50196078431372548,b:0},lime:{r:0,g:1,b:0},honeydew:{r:.94117647058823528,g:1,b:.94117647058823528},mediumseagreen:{r:.23529411764705882,g:.70196078431372544,b:.44313725490196076},seagreen:{r:.1803921568627451,g:.54509803921568623,b:.3411764705882353},springgreen:{r:0,g:1,b:.49803921568627452},mintcream:{r:.96078431372549022,g:1,b:.98039215686274506},mediumspringgreen:{r:0,g:.98039215686274506,b:.60392156862745094},mediumaquamarine:{r:.4,g:.803921568627451,b:.66666666666666663},aquamarine:{r:.49803921568627452,g:1,b:.83137254901960789},turquoise:{r:.25098039215686274,g:.8784313725490196,b:.81568627450980391},lightseagreen:{r:.12549019607843137,g:.69803921568627447,b:.66666666666666663},mediumturquoise:{r:.28235294117647058,g:.81960784313725488,b:.8},darkslategray:{r:.18431372549019609,g:.30980392156862746,b:.30980392156862746},paleturquoise:{r:.68627450980392157,g:.93333333333333335,b:.93333333333333335},teal:{r:0,g:.50196078431372548,b:.50196078431372548},darkcyan:{r:0,g:.54509803921568623,b:.54509803921568623},darkturquoise:{r:0,g:.807843137254902,b:.81960784313725488},aqua:{r:0,g:1,b:1},cyan:{r:0,g:1,b:1},lightcyan:{r:.8784313725490196,g:1,b:1},azure:{r:.94117647058823528,g:1,b:1},cadetblue:{r:.37254901960784315,g:.61960784313725492,b:.62745098039215685},powderblue:{r:.69019607843137254,g:.8784313725490196,b:.90196078431372551},lightblue:{r:.67843137254901964,g:.84705882352941175,b:.90196078431372551},deepskyblue:{r:0,g:.74901960784313726,b:1},skyblue:{r:.52941176470588236,g:.807843137254902,b:.92156862745098034},lightskyblue:{r:.52941176470588236,g:.807843137254902,b:.98039215686274506},steelblue:{r:.27450980392156865,g:.50980392156862742,b:.70588235294117652},aliceblue:{r:.94117647058823528,g:.97254901960784312,b:1},dodgerblue:{r:.11764705882352941,g:.56470588235294117,b:1},slategray:{r:.4392156862745098,g:.50196078431372548,b:.56470588235294117},lightslategray:{r:.46666666666666667,g:.53333333333333333,b:.6},lightsteelblue:{r:.69019607843137254,g:.7686274509803922,b:.87058823529411766},cornflowerblue:{r:.39215686274509803,g:.58431372549019611,b:.92941176470588238},royalblue:{r:.25490196078431371,g:.41176470588235292,b:.88235294117647056},midnightblue:{r:.098039215686274508,g:.098039215686274508,b:.4392156862745098},lavender:{r:.90196078431372551,g:.90196078431372551,b:.98039215686274506},navy:{r:0,g:0,b:.50196078431372548},darkblue:{r:0,g:0,b:.54509803921568623},mediumblue:{r:0,g:0,b:.803921568627451},blue:{r:0,g:0,b:1},ghostwhite:{r:.97254901960784312,g:.97254901960784312,b:1},darkslateblue:{r:.28235294117647058,g:.23921568627450981,b:.54509803921568623},slateblue:{r:.41568627450980394,g:.35294117647058826,b:.803921568627451},mediumslateblue:{r:.4823529411764706,g:.40784313725490196,b:.93333333333333335},mediumpurple:{r:.57647058823529407,g:.4392156862745098,b:.85882352941176465},blueviolet:{r:.54117647058823526,g:.16862745098039217,b:.88627450980392153},indigo:{r:.29411764705882354,g:0,b:.50980392156862742},darkorchid:{r:.6,g:.19607843137254902,b:.8},darkviolet:{r:.58039215686274515,g:0,b:.82745098039215681},mediumorchid:{r:.72941176470588232,g:.33333333333333331,b:.82745098039215681},thistle:{r:.84705882352941175,g:.74901960784313726,b:.84705882352941175},plum:{r:.8666666666666667,g:.62745098039215685,b:.8666666666666667},violet:{r:.93333333333333335,g:.50980392156862742,b:.93333333333333335},purple:{r:.50196078431372548,g:0,b:.50196078431372548},darkmagenta:{r:.54509803921568623,g:0,b:.54509803921568623},magenta:{r:1,g:0,b:1},fuchsia:{r:1,g:0,b:1},orchid:{r:.85490196078431369,g:.4392156862745098,b:.83921568627450982},mediumvioletred:{r:.7803921568627451,g:.082352941176470587,b:.52156862745098043},deeppink:{r:1,g:.0784313725490196,b:.57647058823529407},hotpink:{r:1,g:.41176470588235292,b:.70588235294117652},palevioletred:{r:.85882352941176465,g:.4392156862745098,b:.57647058823529407},lavenderblush:{r:1,g:.94117647058823528,b:.96078431372549022},crimson:{r:.86274509803921573,g:.0784313725490196,b:.23529411764705882},pink:{r:1,g:.75294117647058822,b:.796078431372549},lightpink:{r:1,g:.71372549019607845,b:.75686274509803919}},y=function(t){var u=!1;return n.each(r,function(n,r){if(t.equals(new i(r.r,r.g,r.b)))return u=n,!1}),u},h=function(t){var o=t.getRGB(),f=null,e=!1,u;return n.each(r,function(n,r){if(u=t.distance(new i(r.r,r.g,r.b)),u<f||f===null){if(e=n,u==0)return!1;f=u}}),e},c=function(n){var t,r;return(r=/^#?([a-fA-F0-9]{1,6})$/.exec(n),r)?(t=parseInt(r[1],16),new i((t>>16&255)/255,(t>>8&255)/255,(t&255)/255)):!1},u=function(t){var f=n.trim(t).toLowerCase(),u;return t==""?new i:r[f]?new i(r[f].r,r[f].g,r[f].b):(u=/^rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)$/.exec(t),u)?new i(u[1]/255,u[2]/255,u[3]/255,parseFloat(u[4])):(u=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)$/.exec(t),u)?(new i).setHSL(u[1]/255,u[2]/255,u[3]/255).setAlpha(parseFloat(u[4])):(u=/^rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)$/.exec(t),u)?new i(u[1]/100,u[2]/100,u[3]/100,u[4]/100):(u=/^hsla?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)$/.exec(t),u)?(new i).setHSL(u[1]/100,u[2]/100,u[3]/100).setAlpha(u[4]/100):(u=/^#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/.exec(t),u)?new i(parseInt(u[1],16)/255,parseInt(u[2],16)/255,parseInt(u[3],16)/255):(u=/^#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/.exec(t),u)?new i(parseInt(u[1]+u[1],16)/255,parseInt(u[2]+u[2],16)/255,parseInt(u[3]+u[3],16)/255):c(t)},p=function(t,i){var s,r,u,e,h,v,p,w,f,o,c,l,a,y;for(t.sort(function(n,t){return n.pos[1]==t.pos[1]?n.pos[0]-t.pos[0]:n.pos[1]-t.pos[1]}),e=0,h=0,n.each(t,function(n,t){e=Math.max(e,t.pos[0]+t.pos[2]);h=Math.max(h,t.pos[1]+t.pos[3])}),s=[],r=0;r<e;++r)s.push([]);for(p=[],v=[],n.each(t,function(n,t){for(r=0;r<t.pos[2];r+=1)v[t.pos[0]+r]=!0;for(u=0;u<t.pos[3];u+=1)p[t.pos[1]+u]=!0}),o="",f=t[w=0],u=0;u<h;++u){for(o+="<tr>",r=0;r<e;r)if(typeof f!="undefined"&&r==f.pos[0]&&u==f.pos[1]){for(o+=i(f,r,u),l=0;l<f.pos[3];l+=1)for(c=0;c<f.pos[2];c+=1)s[r+c][u+l]=!0;r+=f.pos[2];f=t[++w]}else{for(a=0,y=!1;r<e&&s[r][u]===undefined&&(f===undefined||u<f.pos[1]||u==f.pos[1]&&r<f.pos[0]);)v[r]===!0&&(a+=1),y=!0,r+=1;a>0?o+='<td colspan="'+a+'"><\/td>':y||(r+=1)}o+="<\/tr>"}return'<table cellspacing="0" cellpadding="0" border="0"><tbody>'+o+"<\/tbody><\/table>"},l={header:function(t){var u=this,i=null,r=function(){var i=t.options.title||t._getRegional("title"),n='<span class="ui-dialog-title">'+i+"<\/span>";return!t.inline&&t.options.showCloseButton&&(n+='<a href="#" class="ui-dialog-titlebar-close ui-corner-all" role="button"><span class="ui-icon ui-icon-closethick">close<\/span><\/a>'),'<div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix">'+n+"<\/div>"};this.init=function(){i=n(r()).prependTo(t.dialog);var u=n(".ui-dialog-titlebar-close",i);t._hoverable(u);t._focusable(u);u.click(function(n){n.preventDefault();t.close()});!t.inline&&t.options.draggable&&t.dialog.draggable({handle:i})}},map:function(t){var r=this,i=null,u,e,f,o;u=function(r){if(t.opened){var o=n(".ui-colorpicker-map-layer-pointer",i),s=o.offset(),l=o.width(),a=o.height(),h=r.pageX-s.left,c=r.pageY-s.top;h>=0&&h<l&&c>=0&&c<a&&(r.stopImmediatePropagation(),r.preventDefault(),i.unbind("mousedown",u),n(document).bind("mouseup",e),n(document).bind("mousemove",f),f(r))}};e=function(t){t.stopImmediatePropagation();t.preventDefault();n(document).unbind("mouseup",e);n(document).unbind("mousemove",f);i.bind("mousedown",u)};f=function(u){if(u.stopImmediatePropagation(),u.preventDefault(),u.pageX!==r.x||u.pageY!==r.y){r.x=u.pageX;r.y=u.pageY;var o=n(".ui-colorpicker-map-layer-pointer",i),s=o.offset(),h=o.width(),c=o.height(),f=u.pageX-s.left,e=u.pageY-s.top;f=Math.max(0,Math.min(f/h,1));e=Math.max(0,Math.min(e/c,1));switch(t.mode){case"h":t.color.setHSV(null,f,1-e);break;case"s":case"a":t.color.setHSV(f,null,1-e);break;case"v":t.color.setHSV(f,1-e,null);break;case"r":t.color.setRGB(null,1-e,f);break;case"g":t.color.setRGB(1-e,null,f);break;case"b":t.color.setRGB(f,1-e,null)}t._change()}};o=function(){return'<div class="ui-colorpicker-map ui-colorpicker-border"><span class="ui-colorpicker-map-layer-1">&nbsp;<\/span><span class="ui-colorpicker-map-layer-2">&nbsp;<\/span>'+(t.options.alpha?'<span class="ui-colorpicker-map-layer-alpha">&nbsp;<\/span>':"")+'<span class="ui-colorpicker-map-layer-pointer"><span class="ui-colorpicker-map-pointer"><\/span><\/span><\/div>'};this.update=function(){switch(t.mode){case"h":n(".ui-colorpicker-map-layer-1",i).css({"background-position":"0 0",opacity:""}).show();n(".ui-colorpicker-map-layer-2",i).hide();break;case"s":case"a":n(".ui-colorpicker-map-layer-1",i).css({"background-position":"0 -260px",opacity:""}).show();n(".ui-colorpicker-map-layer-2",i).css({"background-position":"0 -520px",opacity:""}).show();break;case"v":n(i).css("background-color","black");n(".ui-colorpicker-map-layer-1",i).css({"background-position":"0 -780px",opacity:""}).show();n(".ui-colorpicker-map-layer-2",i).hide();break;case"r":n(".ui-colorpicker-map-layer-1",i).css({"background-position":"0 -1040px",opacity:""}).show();n(".ui-colorpicker-map-layer-2",i).css({"background-position":"0 -1300px",opacity:""}).show();break;case"g":n(".ui-colorpicker-map-layer-1",i).css({"background-position":"0 -1560px",opacity:""}).show();n(".ui-colorpicker-map-layer-2",i).css({"background-position":"0 -1820px",opacity:""}).show();break;case"b":n(".ui-colorpicker-map-layer-1",i).css({"background-position":"0 -2080px",opacity:""}).show();n(".ui-colorpicker-map-layer-2",i).css({"background-position":"0 -2340px",opacity:""}).show()}r.repaint()};this.repaint=function(){var r=n(".ui-colorpicker-map-layer-pointer",i),u=0,f=0;switch(t.mode){case"h":u=t.color.getHSV().s*r.width();f=(1-t.color.getHSV().v)*r.width();n(i).css("background-color",t.color.copy().normalize().toCSS());break;case"s":case"a":u=t.color.getHSV().h*r.width();f=(1-t.color.getHSV().v)*r.width();n(".ui-colorpicker-map-layer-2",i).css("opacity",1-t.color.getHSV().s);break;case"v":u=t.color.getHSV().h*r.width();f=(1-t.color.getHSV().s)*r.width();n(".ui-colorpicker-map-layer-1",i).css("opacity",t.color.getHSV().v);break;case"r":u=t.color.getRGB().b*r.width();f=(1-t.color.getRGB().g)*r.width();n(".ui-colorpicker-map-layer-2",i).css("opacity",t.color.getRGB().r);break;case"g":u=t.color.getRGB().b*r.width();f=(1-t.color.getRGB().r)*r.width();n(".ui-colorpicker-map-layer-2",i).css("opacity",t.color.getRGB().g);break;case"b":u=t.color.getRGB().r*r.width();f=(1-t.color.getRGB().g)*r.width();n(".ui-colorpicker-map-layer-2",i).css("opacity",t.color.getRGB().b)}t.options.alpha&&n(".ui-colorpicker-map-layer-alpha",i).css("opacity",1-t.color.getAlpha());n(".ui-colorpicker-map-pointer",i).css({left:u-7,top:f-7})};this.init=function(){i=n(o()).appendTo(n(".ui-colorpicker-map-container",t.dialog));i.bind("mousedown",u)}},bar:function(t){var f=this,i=null,r,e,u,o;r=function(f){if(t.opened){var o=n(".ui-colorpicker-bar-layer-pointer",i),s=o.offset(),l=o.width(),a=o.height(),h=f.pageX-s.left,c=f.pageY-s.top;h>=0&&h<l&&c>=0&&c<a&&(f.stopImmediatePropagation(),f.preventDefault(),i.unbind("mousedown",r),n(document).bind("mouseup",e),n(document).bind("mousemove",u),u(f))}};e=function(t){t.stopImmediatePropagation();t.preventDefault();n(document).unbind("mouseup",e);n(document).unbind("mousemove",u);i.bind("mousedown",r)};u=function(r){if(r.stopImmediatePropagation(),r.preventDefault(),r.pageY!==f.y){f.y=r.pageY;var e=n(".ui-colorpicker-bar-layer-pointer",i),o=e.offset(),s=e.height(),u=r.pageY-o.top;u=Math.max(0,Math.min(u/s,1));switch(t.mode){case"h":t.color.setHSV(1-u,null,null);break;case"s":t.color.setHSV(null,1-u,null);break;case"v":t.color.setHSV(null,null,1-u);break;case"r":t.color.setRGB(1-u,null,null);break;case"g":t.color.setRGB(null,1-u,null);break;case"b":t.color.setRGB(null,null,1-u);break;case"a":t.color.setAlpha(1-u)}t._change()}};o=function(){var n='<div class="ui-colorpicker-bar ui-colorpicker-border"><span class="ui-colorpicker-bar-layer-1">&nbsp;<\/span><span class="ui-colorpicker-bar-layer-2">&nbsp;<\/span><span class="ui-colorpicker-bar-layer-3">&nbsp;<\/span><span class="ui-colorpicker-bar-layer-4">&nbsp;<\/span>';return t.options.alpha&&(n+='<span class="ui-colorpicker-bar-layer-alpha">&nbsp;<\/span><span class="ui-colorpicker-bar-layer-alphabar">&nbsp;<\/span>'),n+'<span class="ui-colorpicker-bar-layer-pointer"><span class="ui-colorpicker-bar-pointer"><\/span><\/span><\/div>'};this.update=function(){switch(t.mode){case"h":case"s":case"v":case"r":case"g":case"b":n(".ui-colorpicker-bar-layer-alpha",i).show();n(".ui-colorpicker-bar-layer-alphabar",i).hide();break;case"a":n(".ui-colorpicker-bar-layer-alpha",i).hide();n(".ui-colorpicker-bar-layer-alphabar",i).show()}switch(t.mode){case"h":n(".ui-colorpicker-bar-layer-1",i).css({"background-position":"0 0",opacity:""}).show();n(".ui-colorpicker-bar-layer-2",i).hide();n(".ui-colorpicker-bar-layer-3",i).hide();n(".ui-colorpicker-bar-layer-4",i).hide();break;case"s":n(".ui-colorpicker-bar-layer-1",i).css({"background-position":"0 -260px",opacity:""}).show();n(".ui-colorpicker-bar-layer-2",i).css({"background-position":"0 -520px",opacity:""}).show();n(".ui-colorpicker-bar-layer-3",i).hide();n(".ui-colorpicker-bar-layer-4",i).hide();break;case"v":n(".ui-colorpicker-bar-layer-1",i).css({"background-position":"0 -520px",opacity:""}).show();n(".ui-colorpicker-bar-layer-2",i).hide();n(".ui-colorpicker-bar-layer-3",i).hide();n(".ui-colorpicker-bar-layer-4",i).hide();break;case"r":n(".ui-colorpicker-bar-layer-1",i).css({"background-position":"0 -1560px",opacity:""}).show();n(".ui-colorpicker-bar-layer-2",i).css({"background-position":"0 -1300px",opacity:""}).show();n(".ui-colorpicker-bar-layer-3",i).css({"background-position":"0 -780px",opacity:""}).show();n(".ui-colorpicker-bar-layer-4",i).css({"background-position":"0 -1040px",opacity:""}).show();break;case"g":n(".ui-colorpicker-bar-layer-1",i).css({"background-position":"0 -2600px",opacity:""}).show();n(".ui-colorpicker-bar-layer-2",i).css({"background-position":"0 -2340px",opacity:""}).show();n(".ui-colorpicker-bar-layer-3",i).css({"background-position":"0 -1820px",opacity:""}).show();n(".ui-colorpicker-bar-layer-4",i).css({"background-position":"0 -2080px",opacity:""}).show();break;case"b":n(".ui-colorpicker-bar-layer-1",i).css({"background-position":"0 -3640px",opacity:""}).show();n(".ui-colorpicker-bar-layer-2",i).css({"background-position":"0 -3380px",opacity:""}).show();n(".ui-colorpicker-bar-layer-3",i).css({"background-position":"0 -2860px",opacity:""}).show();n(".ui-colorpicker-bar-layer-4",i).css({"background-position":"0 -3120px",opacity:""}).show();break;case"a":n(".ui-colorpicker-bar-layer-1",i).hide();n(".ui-colorpicker-bar-layer-2",i).hide();n(".ui-colorpicker-bar-layer-3",i).hide();n(".ui-colorpicker-bar-layer-4",i).hide()}f.repaint()};this.repaint=function(){var u=n(".ui-colorpicker-bar-layer-pointer",i),r=0;switch(t.mode){case"h":r=(1-t.color.getHSV().h)*u.height();break;case"s":r=(1-t.color.getHSV().s)*u.height();n(".ui-colorpicker-bar-layer-2",i).css("opacity",1-t.color.getHSV().v);n(i).css("background-color",t.color.copy().normalize().toCSS());break;case"v":r=(1-t.color.getHSV().v)*u.height();n(i).css("background-color",t.color.copy().normalize().toCSS());break;case"r":r=(1-t.color.getRGB().r)*u.height();n(".ui-colorpicker-bar-layer-2",i).css("opacity",Math.max(0,t.color.getRGB().b-t.color.getRGB().g));n(".ui-colorpicker-bar-layer-3",i).css("opacity",Math.max(0,t.color.getRGB().g-t.color.getRGB().b));n(".ui-colorpicker-bar-layer-4",i).css("opacity",Math.min(t.color.getRGB().b,t.color.getRGB().g));break;case"g":r=(1-t.color.getRGB().g)*u.height();n(".ui-colorpicker-bar-layer-2",i).css("opacity",Math.max(0,t.color.getRGB().b-t.color.getRGB().r));n(".ui-colorpicker-bar-layer-3",i).css("opacity",Math.max(0,t.color.getRGB().r-t.color.getRGB().b));n(".ui-colorpicker-bar-layer-4",i).css("opacity",Math.min(t.color.getRGB().r,t.color.getRGB().b));break;case"b":r=(1-t.color.getRGB().b)*u.height();n(".ui-colorpicker-bar-layer-2",i).css("opacity",Math.max(0,t.color.getRGB().r-t.color.getRGB().g));n(".ui-colorpicker-bar-layer-3",i).css("opacity",Math.max(0,t.color.getRGB().g-t.color.getRGB().r));n(".ui-colorpicker-bar-layer-4",i).css("opacity",Math.min(t.color.getRGB().r,t.color.getRGB().g));break;case"a":r=(1-t.color.getAlpha())*u.height();n(i).css("background-color",t.color.copy().normalize().toCSS())}t.mode!=="a"&&n(".ui-colorpicker-bar-layer-alpha",i).css("opacity",1-t.color.getAlpha());n(".ui-colorpicker-bar-pointer",i).css("top",r-3)};this.init=function(){i=n(o()).appendTo(n(".ui-colorpicker-bar-container",t.dialog));i.bind("mousedown",r)}},preview:function(t){var u=this,i=null,r;r=function(){return'<div class="ui-colorpicker-preview ui-colorpicker-border"><div class="ui-colorpicker-preview-initial"><div class="ui-colorpicker-preview-initial-alpha"><\/div><\/div><div class="ui-colorpicker-preview-current"><div class="ui-colorpicker-preview-current-alpha"><\/div><\/div><\/div>'};this.init=function(){i=n(r()).appendTo(n(".ui-colorpicker-preview-container",t.dialog));n(".ui-colorpicker-preview-initial",i).click(function(){t.color=t.currentColor.copy();t._change()})};this.update=function(){t.options.alpha?n(".ui-colorpicker-preview-initial-alpha, .ui-colorpicker-preview-current-alpha",i).show():n(".ui-colorpicker-preview-initial-alpha, .ui-colorpicker-preview-current-alpha",i).hide();this.repaint()};this.repaint=function(){n(".ui-colorpicker-preview-initial",i).css("background-color",t.currentColor.toCSS()).attr("title",t.currentColor.toHex());n(".ui-colorpicker-preview-initial-alpha",i).css("opacity",1-t.currentColor.getAlpha());n(".ui-colorpicker-preview-current",i).css("background-color",t.color.toCSS()).attr("title",t.color.toHex());n(".ui-colorpicker-preview-current-alpha",i).css("opacity",1-t.color.getAlpha())}},hsv:function(t){var u=this,i=null,r;r=function(){var n="";return t.options.hsv&&(n+='<div class="ui-colorpicker-hsv-h"><input class="ui-colorpicker-mode" type="radio" value="h"/><label>'+t._getRegional("hsvH")+'<\/label><input class="ui-colorpicker-number" type="number" min="0" max="360" size="10"/><span class="ui-colorpicker-unit">&deg;<\/span><\/div><div class="ui-colorpicker-hsv-s"><input class="ui-colorpicker-mode" type="radio" value="s"/><label>'+t._getRegional("hsvS")+'<\/label><input class="ui-colorpicker-number" type="number" min="0" max="100" size="10"/><span class="ui-colorpicker-unit">%<\/span><\/div><div class="ui-colorpicker-hsv-v"><input class="ui-colorpicker-mode" type="radio" value="v"/><label>'+t._getRegional("hsvV")+'<\/label><input class="ui-colorpicker-number" type="number" min="0" max="100" size="10"/><span class="ui-colorpicker-unit">%<\/span><\/div>'),'<div class="ui-colorpicker-hsv">'+n+"<\/div>"};this.init=function(){i=n(r()).appendTo(n(".ui-colorpicker-hsv-container",t.dialog));n(".ui-colorpicker-mode",i).click(function(){t.mode=n(this).val();t._updateAllParts()});n(".ui-colorpicker-number",i).bind("change keyup",function(){t.color.setHSV(n(".ui-colorpicker-hsv-h .ui-colorpicker-number",i).val()/360,n(".ui-colorpicker-hsv-s .ui-colorpicker-number",i).val()/100,n(".ui-colorpicker-hsv-v .ui-colorpicker-number",i).val()/100);t._change()})};this.repaint=function(){var r=t.color.getHSV();r.h*=360;r.s*=100;r.v*=100;n.each(r,function(t,r){var u=n(".ui-colorpicker-hsv-"+t+" .ui-colorpicker-number",i);r=Math.round(r);u.val()!==r&&u.val(r)})};this.update=function(){n(".ui-colorpicker-mode",i).each(function(){n(this).attr("checked",n(this).val()===t.mode)});this.repaint()}},rgb:function(t){var u=this,i=null,r;r=function(){var n="";return t.options.rgb&&(n+='<div class="ui-colorpicker-rgb-r"><input class="ui-colorpicker-mode" type="radio" value="r"/><label>'+t._getRegional("rgbR")+'<\/label><input class="ui-colorpicker-number" type="number" min="0" max="255"/><\/div><div class="ui-colorpicker-rgb-g"><input class="ui-colorpicker-mode" type="radio" value="g"/><label>'+t._getRegional("rgbG")+'<\/label><input class="ui-colorpicker-number" type="number" min="0" max="255"/><\/div><div class="ui-colorpicker-rgb-b"><input class="ui-colorpicker-mode" type="radio" value="b"/><label>'+t._getRegional("rgbB")+'<\/label><input class="ui-colorpicker-number" type="number" min="0" max="255"/><\/div>'),'<div class="ui-colorpicker-rgb">'+n+"<\/div>"};this.init=function(){i=n(r()).appendTo(n(".ui-colorpicker-rgb-container",t.dialog));n(".ui-colorpicker-mode",i).click(function(){t.mode=n(this).val();t._updateAllParts()});n(".ui-colorpicker-number",i).bind("change keyup",function(){t.color.setRGB(n(".ui-colorpicker-rgb-r .ui-colorpicker-number",i).val()/255,n(".ui-colorpicker-rgb-g .ui-colorpicker-number",i).val()/255,n(".ui-colorpicker-rgb-b .ui-colorpicker-number",i).val()/255);t._change()})};this.repaint=function(){n.each(t.color.getRGB(),function(t,r){var u=n(".ui-colorpicker-rgb-"+t+" .ui-colorpicker-number",i);r=Math.round(r*255);u.val()!==r&&u.val(r)})};this.update=function(){n(".ui-colorpicker-mode",i).each(function(){n(this).attr("checked",n(this).val()===t.mode)});this.repaint()}},lab:function(t){var u=this,i=null,r=function(){var n="";return t.options.hsv&&(n+='<div class="ui-colorpicker-lab-l"><label>'+t._getRegional("labL")+'<\/label><input class="ui-colorpicker-number" type="number" min="0" max="100"/><\/div><div class="ui-colorpicker-lab-a"><label>'+t._getRegional("labA")+'<\/label><input class="ui-colorpicker-number" type="number" min="-128" max="127"/><\/div><div class="ui-colorpicker-lab-b"><label>'+t._getRegional("labB")+'<\/label><input class="ui-colorpicker-number" type="number" min="-128" max="127"/><\/div>'),'<div class="ui-colorpicker-lab">'+n+"<\/div>"};this.init=function(){i=n(r()).appendTo(n(".ui-colorpicker-lab-container",t.dialog));n(".ui-colorpicker-number",i).on("change keyup",function(){t.color.setLAB(parseInt(n(".ui-colorpicker-lab-l .ui-colorpicker-number",i).val(),10)/100,(parseInt(n(".ui-colorpicker-lab-a .ui-colorpicker-number",i).val(),10)+128)/255,(parseInt(n(".ui-colorpicker-lab-b .ui-colorpicker-number",i).val(),10)+128)/255);t._change()})};this.repaint=function(){var r=t.color.getLAB();r.l*=100;r.a=r.a*255-128;r.b=r.b*255-128;n.each(r,function(t,r){var u=n(".ui-colorpicker-lab-"+t+" .ui-colorpicker-number",i);r=Math.round(r);u.val()!==r&&u.val(r)})};this.update=function(){this.repaint()}},cmyk:function(t){var u=this,i=null,r=function(){var n="";return t.options.hsv&&(n+='<div class="ui-colorpicker-cmyk-c"><label>'+t._getRegional("cmykC")+'<\/label><input class="ui-colorpicker-number" type="number" min="0" max="100"/><span class="ui-colorpicker-unit">%<\/span><\/div><div class="ui-colorpicker-cmyk-m"><label>'+t._getRegional("cmykM")+'<\/label><input class="ui-colorpicker-number" type="number" min="0" max="100"/><span class="ui-colorpicker-unit">%<\/span><\/div><div class="ui-colorpicker-cmyk-y"><label>'+t._getRegional("cmykY")+'<\/label><input class="ui-colorpicker-number" type="number" min="0" max="100"/><span class="ui-colorpicker-unit">%<\/span><\/div><div class="ui-colorpicker-cmyk-k"><label>'+t._getRegional("cmykK")+'<\/label><input class="ui-colorpicker-number" type="number" min="0" max="100"/><span class="ui-colorpicker-unit">%<\/span><\/div>'),'<div class="ui-colorpicker-cmyk">'+n+"<\/div>"};this.init=function(){i=n(r()).appendTo(n(".ui-colorpicker-cmyk-container",t.dialog));n(".ui-colorpicker-number",i).on("change keyup",function(){t.color.setCMYK(parseInt(n(".ui-colorpicker-cmyk-c .ui-colorpicker-number",i).val(),10)/100,parseInt(n(".ui-colorpicker-cmyk-m .ui-colorpicker-number",i).val(),10)/100,parseInt(n(".ui-colorpicker-cmyk-y .ui-colorpicker-number",i).val(),10)/100,parseInt(n(".ui-colorpicker-cmyk-k .ui-colorpicker-number",i).val(),10)/100);t._change()})};this.repaint=function(){n.each(t.color.getCMYK(),function(t,r){var u=n(".ui-colorpicker-cmyk-"+t+" .ui-colorpicker-number",i);r=Math.round(r*100);u.val()!==r&&u.val(r)})};this.update=function(){this.repaint()}},alpha:function(t){var u=this,i=null,r;r=function(){var n="";return t.options.alpha&&(n+='<div class="ui-colorpicker-a"><input class="ui-colorpicker-mode" name="mode" type="radio" value="a"/><label>'+t._getRegional("alphaA")+'<\/label><input class="ui-colorpicker-number" type="number" min="0" max="100"/><span class="ui-colorpicker-unit">%<\/span><\/div>'),'<div class="ui-colorpicker-alpha">'+n+"<\/div>"};this.init=function(){i=n(r()).appendTo(n(".ui-colorpicker-alpha-container",t.dialog));n(".ui-colorpicker-mode",i).click(function(){t.mode=n(this).val();t._updateAllParts()});n(".ui-colorpicker-number",i).bind("change keyup",function(){t.color.setAlpha(n(".ui-colorpicker-a .ui-colorpicker-number",i).val()/100);t._change()})};this.update=function(){n(".ui-colorpicker-mode",i).each(function(){n(this).attr("checked",n(this).val()===t.mode)});this.repaint()};this.repaint=function(){var r=n(".ui-colorpicker-a .ui-colorpicker-number",i),u=Math.round(t.color.getAlpha()*100);r.is(":focus")||r.val()===u||r.val(u)}},hex:function(t){var u=this,i=null,r;r=function(){var n="";return t.options.alpha&&(n+='<input class="ui-colorpicker-hex-alpha" type="text" maxlength="2" size="2"/>'),n+='<input class="ui-colorpicker-hex-input" type="text" maxlength="6" size="6"/>','<div class="ui-colorpicker-hex"><label>#<\/label>'+n+"<\/div>"};this.init=function(){i=n(r()).appendTo(n(".ui-colorpicker-hex-container",t.dialog));n(".ui-colorpicker-hex-input",i).bind("change keydown keyup",function(){/[^a-fA-F0-9]/.test(n(this).val())&&n(this).val(n(this).val().replace(/[^a-fA-F0-9]/,""))});n(".ui-colorpicker-hex-input",i).bind("change keyup",function(){t.color=c(n(this).val()).setAlpha(t.color.getAlpha());t._change()});n(".ui-colorpicker-hex-alpha",i).bind("change keydown keyup",function(){/[^a-fA-F0-9]/.test(n(this).val())&&n(this).val(n(this).val().replace(/[^a-fA-F0-9]/,""))});n(".ui-colorpicker-hex-alpha",i).bind("change keyup",function(){t.color.setAlpha(parseInt(n(".ui-colorpicker-hex-alpha",i).val(),16)/255);t._change()})};this.update=function(){this.repaint()};this.repaint=function(){n(".ui-colorpicker-hex-input",i).is(":focus")||n(".ui-colorpicker-hex-input",i).val(t.color.toHex(!0));n(".ui-colorpicker-hex-alpha",i).is(":focus")||n(".ui-colorpicker-hex-alpha",i).val(s(t.color.getAlpha()*255))}},swatches:function(t){var e=this,r=null,f=function(){var r="";return n.each(t.options.swatches,function(n,t){var u=new i(t.r,t.g,t.b),f=u.toCSS();r+='<div class="ui-colorpicker-swatch" style="background-color: '+f+'" title="'+n+'"><\/div>'}),'<div class="ui-colorpicker-swatches ui-colorpicker-border">'+r+"<\/div>"};this.init=function(){r=n(f()).appendTo(n(".ui-colorpicker-swatches-container",t.dialog));n(".ui-colorpicker-swatch",r).click(function(){t.color=u(n(this).css("background-color"));t._change()})}},footer:function(t){var o=this,i=null,r="ui-colorpicker-special-transparent-"+f,u="ui-colorpicker-special-none-"+f,e=function(){var n="";return(t.options.alpha||!t.inline&&t.options.showNoneButton)&&(n+='<div class="ui-colorpicker-buttonset">',t.options.alpha&&(n+='<input type="radio" name="ui-colorpicker-special" id="'+r+'" class="ui-colorpicker-special-transparent"/><label for="'+r+'">'+t._getRegional("transparent")+"<\/label>"),!t.inline&&t.options.showNoneButton&&(n+='<input type="radio" name="ui-colorpicker-special" id="'+u+'" class="ui-colorpicker-special-none"><label for="'+u+'">'+t._getRegional("none")+"<\/label>"),n+="<\/div>"),t.inline||(n+='<div class="ui-dialog-buttonset">',t.options.showCancelButton&&(n+='<button class="ui-colorpicker-cancel">'+t._getRegional("cancel")+"<\/button>"),n+='<button class="ui-colorpicker-ok">'+t._getRegional("ok")+"<\/button>",n+="<\/div>"),'<div class="ui-dialog-buttonpane ui-widget-content">'+n+"<\/div>"};this.init=function(){i=n(e()).appendTo(t.dialog);n(".ui-colorpicker-ok",i).button().click(function(){t.close()});n(".ui-colorpicker-cancel",i).button().click(function(){t.color=t.currentColor.copy();t._change(t.color.set);t.close()});n(".ui-colorpicker-buttonset",i).buttonset();n(".ui-colorpicker-special-color",i).click(function(){t._change()});n("#"+u,i).click(function(){t._change(!1)});n("#"+r,i).click(function(){t.color.setAlpha(0);t._change()})};this.repaint=function(){t.color.set?t.color.getAlpha()==0?n(".ui-colorpicker-special-transparent",i).attr("checked",!0).button("refresh"):n("input",i).attr("checked",!1).button("refresh"):n(".ui-colorpicker-special-none",i).attr("checked",!0).button("refresh");n(".ui-colorpicker-cancel",i).button(t.changed?"enable":"disable")};this.update=function(){}}},i=function(){var t={rgb:{r:0,g:0,b:0},hsv:{h:0,s:0,v:0},hsl:{h:0,s:0,l:0},lab:{l:0,a:0,b:0},cmyk:{c:0,m:0,y:0,k:1}},a=1,u=arguments,r=function(n){return isNaN(n)||n===null?0:(typeof n=="string"&&(n=parseInt(n,10)),Math.max(0,Math.min(n,1)))},l=function(n){var t="0123456789abcdef",i=n%16,r=(n-i)/16;return t.charAt(r)+t.charAt(i)},f=function(n){var t=n.r>.04045?Math.pow((n.r+.055)/1.055,2.4):n.r/12.92,i=n.g>.04045?Math.pow((n.g+.055)/1.055,2.4):n.g/12.92,r=n.b>.04045?Math.pow((n.b+.055)/1.055,2.4):n.b/12.92;return{x:t*.4124+i*.3576+r*.1805,y:t*.2126+i*.7152+r*.0722,z:t*.0193+i*.1192+r*.9505}},v=function(n){var t={r:n.x*3.2406+n.y*-1.5372+n.z*-.4986,g:n.x*-.9689+n.y*1.8758+n.z*.0415,b:n.x*.0557+n.y*-.204+n.z*1.057};return t.r=t.r>.0031308?1.055*Math.pow(t.r,1/2.4)-.055:12.92*t.r,t.g=t.g>.0031308?1.055*Math.pow(t.g,1/2.4)-.055:12.92*t.g,t.b=t.b>.0031308?1.055*Math.pow(t.b,1/2.4)-.055:12.92*t.b,t},e=function(n){var o=Math.min(n.r,n.g,n.b),i=Math.max(n.r,n.g,n.b),r=i-o,u,f,e,t={h:0,s:0,v:i};return r===0?(t.h=0,t.s=0):(t.s=r/i,u=((i-n.r)/6+r/2)/r,f=((i-n.g)/6+r/2)/r,e=((i-n.b)/6+r/2)/r,n.r===i?t.h=e-f:n.g===i?t.h=1/3+u-e:n.b===i&&(t.h=2/3+f-u),t.h<0?t.h+=1:t.h>1&&(t.h-=1)),t},y=function(n){var t={r:0,g:0,b:0},u,i,r,f,e;return n.s===0?t.r=t.g=t.b=n.v:(u=n.h===1?0:n.h*6,i=Math.floor(u),r=n.v*(1-n.s),f=n.v*(1-n.s*(u-i)),e=n.v*(1-n.s*(1-(u-i))),i===0?(t.r=n.v,t.g=e,t.b=r):i===1?(t.r=f,t.g=n.v,t.b=r):i===2?(t.r=r,t.g=n.v,t.b=e):i===3?(t.r=r,t.g=f,t.b=n.v):i===4?(t.r=e,t.g=r,t.b=n.v):(t.r=n.v,t.g=r,t.b=f)),t},o=function(n){var u=Math.min(n.r,n.g,n.b),i=Math.max(n.r,n.g,n.b),r=i-u,f,e,o,t={h:0,s:0,l:(i+u)/2};return r===0?(t.h=0,t.s=0):(t.s=t.l<.5?r/(i+u):r/(2-i-u),f=((i-n.r)/6+r/2)/r,e=((i-n.g)/6+r/2)/r,o=((i-n.b)/6+r/2)/r,n.r===i?t.h=o-e:n.g===i?t.h=1/3+f-o:n.b===i&&(t.h=2/3+e-f),t.h<0?t.h+=1:t.h>1&&(t.h-=1)),t},p=function(n){var i,t,r=function(n,t,i){return(i<0&&(i+=1),i>1&&(i-=1),6*i<1)?n+(t-n)*6*i:2*i<1?t:3*i<2?n+(t-n)*(2/3-i)*6:n};return n.s===0?{r:n.l,g:n.l,b:n.l}:(t=n.l<.5?n.l*(1+n.s):n.l+n.s-n.s*n.l,i=2*n.l-t,{r:r(i,t,n.h+1/3),g:r(i,t,n.h),b:r(i,t,n.h-1/3)})},s=function(n){var i=n.x/.95047,t=n.y,r=n.z/1.08883;return i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,t=t>.008856?Math.pow(t,1/3):7.787*t+16/116,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,{l:(116*t-16)/100,a:(500*(i-t)+128)/255,b:(200*(t-r)+128)/255}},w=function(n){var i={l:n.l*100,a:n.a*255-128,b:n.b*255-128},t={x:0,y:(i.l+16)/116,z:0};return t.x=i.a/500+t.y,t.z=t.y-i.b/200,t.x=Math.pow(t.x,3)>.008856?Math.pow(t.x,3):(t.x-16/116)/7.787,t.y=Math.pow(t.y,3)>.008856?Math.pow(t.y,3):(t.y-16/116)/7.787,t.z=Math.pow(t.z,3)>.008856?Math.pow(t.z,3):(t.z-16/116)/7.787,t.x*=.95047,t.y*=1,t.z*=1.08883,t},h=function(n){return{c:1-n.r,m:1-n.g,y:1-n.b}},b=function(n){return{r:1-n.c,g:1-n.m,b:1-n.y}},c=function(n){var t=1;return(n.c<t&&(t=n.c),n.m<t&&(t=n.m),n.y<t&&(t=n.y),t==1)?{c:0,m:0,y:0,k:1}:{c:(n.c-t)/(1-t),m:(n.m-t)/(1-t),y:(n.y-t)/(1-t),k:t}},k=function(n){return{c:n.c*(1-n.k)+n.k,m:n.m*(1-n.k)+n.k,y:n.y*(1-n.k)+n.k}};this.set=!0;this.setAlpha=function(n){return n!==null&&(a=r(n)),this};this.getAlpha=function(){return a};this.setRGB=function(n,i,u){return t={rgb:this.getRGB()},n!==null&&(t.rgb.r=r(n)),i!==null&&(t.rgb.g=r(i)),u!==null&&(t.rgb.b=r(u)),this};this.setHSV=function(n,i,u){return t={hsv:this.getHSV()},n!==null&&(t.hsv.h=r(n)),i!==null&&(t.hsv.s=r(i)),u!==null&&(t.hsv.v=r(u)),this};this.setHSL=function(n,i,u){return t={hsl:this.getHSL()},n!==null&&(t.hsl.h=r(n)),i!==null&&(t.hsl.s=r(i)),u!==null&&(t.hsl.l=r(u)),this};this.setLAB=function(n,i,u){return t={lab:this.getLAB()},n!==null&&(t.lab.l=r(n)),i!==null&&(t.lab.a=r(i)),u!==null&&(t.lab.b=r(u)),this};this.setCMYK=function(n,i,u,f){return t={cmyk:this.getCMYK()},n!==null&&(t.cmyk.c=r(n)),i!==null&&(t.cmyk.m=r(i)),u!==null&&(t.cmyk.y=r(u)),f!==null&&(t.cmyk.k=r(f)),this};this.getRGB=function(){return t.rgb||(t.rgb=t.lab?v(w(t.lab)):t.hsv?y(t.hsv):t.hsl?p(t.hsl):t.cmyk?b(k(t.cmyk)):{r:0,g:0,b:0},t.rgb.r=r(t.rgb.r),t.rgb.g=r(t.rgb.g),t.rgb.b=r(t.rgb.b)),n.extend({},t.rgb)};this.getHSV=function(){return t.hsv||(t.hsv=t.lab?e(this.getRGB()):t.rgb?e(t.rgb):t.hsl?e(this.getRGB()):t.cmyk?e(this.getRGB()):{h:0,s:0,v:0},t.hsv.h=r(t.hsv.h),t.hsv.s=r(t.hsv.s),t.hsv.v=r(t.hsv.v)),n.extend({},t.hsv)};this.getHSL=function(){return t.hsl||(t.hsl=t.rgb?o(t.rgb):t.hsv?o(this.getRGB()):t.cmyk?o(this.getRGB()):t.hsv?o(this.getRGB()):{h:0,s:0,l:0},t.hsl.h=r(t.hsl.h),t.hsl.s=r(t.hsl.s),t.hsl.l=r(t.hsl.l)),n.extend({},t.hsl)};this.getCMYK=function(){return t.cmyk||(t.cmyk=t.rgb?c(h(t.rgb)):t.hsv?c(h(this.getRGB())):t.hsl?c(h(this.getRGB())):t.lab?c(h(this.getRGB())):{c:0,m:0,y:0,k:1},t.cmyk.c=r(t.cmyk.c),t.cmyk.m=r(t.cmyk.m),t.cmyk.y=r(t.cmyk.y),t.cmyk.k=r(t.cmyk.k)),n.extend({},t.cmyk)};this.getLAB=function(){return t.lab||(t.lab=t.rgb?s(f(t.rgb)):t.hsv?s(f(this.getRGB())):t.hsl?s(f(this.getRGB())):t.cmyk?s(f(this.getRGB())):{l:0,a:0,b:0},t.lab.l=r(t.lab.l),t.lab.a=r(t.lab.a),t.lab.b=r(t.lab.b)),n.extend({},t.lab)};this.getChannels=function(){return{r:this.getRGB().r,g:this.getRGB().g,b:this.getRGB().b,a:this.getAlpha(),h:this.getHSV().h,s:this.getHSV().s,v:this.getHSV().v,c:this.getCMYK().c,m:this.getCMYK().m,y:this.getCMYK().y,k:this.getCMYK().k,L:this.getLAB().l,A:this.getLAB().a,B:this.getLAB().b}};this.getSpaces=function(){return n.extend(!0,{},t)};this.setSpaces=function(n){return t=n,this};this.distance=function(n){var t="get"+"lab".toUpperCase(),i=this[t](),f=n[t](),r=0;for(var u in i)r+=Math.pow(i[u]-f[u],2);return r};this.equals=function(n){var t=this.getRGB(),i=n.getRGB();return this.getAlpha()==n.getAlpha()&&t.r==i.r&&t.g==i.g&&t.b==i.b};this.limit=function(n){n-=1;var t=this.getRGB();this.setRGB(Math.round(t.r*n)/n,Math.round(t.g*n)/n,Math.round(t.b*n)/n)};this.toHex=function(){var n=this.getRGB();return l(n.r*255)+l(n.g*255)+l(n.b*255)};this.toCSS=function(){return"#"+this.toHex()};this.normalize=function(){return this.setHSV(null,1,1),this};this.copy=function(){var n=this.getSpaces(),t=this.getAlpha();return new i(n,t)};u.length==2&&(this.setSpaces(u[0]),this.setAlpha(u[1]===0?0:u[1]||1));u.length>2&&(this.setRGB(u[0],u[1],u[2]),this.setAlpha(u[3]===0?0:u[3]||1))};n.widget("vanderlee.colorpicker",{options:{alpha:!1,altAlpha:!0,altField:"",altOnChange:!0,altProperties:"background-color",autoOpen:!1,buttonColorize:!1,buttonImage:"images/ui-colorpicker.png",buttonImageOnly:!1,buttonText:null,closeOnEscape:!0,closeOnOutside:!0,color:"#00FF00",colorFormat:"HEX",draggable:!0,duration:"fast",hsv:!0,regional:"",layout:{map:[0,0,1,5],bar:[1,0,1,5],preview:[2,0,1,1],hsv:[2,1,1,1],rgb:[2,2,1,1],alpha:[2,3,1,1],hex:[2,4,1,1],lab:[3,1,1,1],cmyk:[3,2,1,2],swatches:[4,0,1,5]},limit:"",modal:!1,mode:"h",parts:"",rgb:!0,showAnim:"fadeIn",showCancelButton:!0,showNoneButton:!1,showCloseButton:!0,showOn:"focus",showOptions:{},swatches:null,title:null,close:null,init:null,select:null,open:null},_create:function(){var t=this,i;return++f,t.widgetEventPrefix="color",t.opened=!1,t.generated=!1,t.inline=!1,t.changed=!1,t.dialog=null,t.button=null,t.image=null,t.overlay=null,t.mode=t.options.mode,t.options.swatches===null&&(t.options.swatches=r),this.element[0].nodeName.toLowerCase()!=="input"&&this.inline?(t.inline=!0,n(this.element).html(v),t.dialog=n(".ui-colorpicker",this.element),t._generate(),t.opened=!0):(t._setColor(t.element.val()),this._callback("init"),n("body").append(a),t.dialog=n(".ui-colorpicker:last"),n(document).mousedown(function(i){if(t.opened&&i.target!==t.element[0]&&!t.overlay){if(t.dialog.is(i.target)||t.dialog.has(i.target).length>0){t.element.blur();return}for(var u=n(i.target).parents(),r=0;r<=u.length;++r)if(t.button!==null&&u[r]===t.button[0])return;t.options.closeOnOutside&&t.close()}}),n(document).keydown(function(n){n.keyCode==27&&t.opened&&t.options.closeOnEscape&&t.close()}),(t.options.showOn==="focus"||t.options.showOn==="both")&&t.element.focus(function(){t.open()}),(t.options.showOn==="button"||t.options.showOn==="both")&&(t.options.buttonImage!==""&&(i=t.options.buttonText||t._getRegional("button"),t.image=n("<img/>").attr({src:t.options.buttonImage,alt:i,title:i}),t._setImageBackground()),t.options.buttonImageOnly&&t.image?t.button=t.image:(t.button=n('<button type="button"><\/button>').html(t.image||t.options.buttonText).button(),t.image=t.image?n("img",t.button).first():null),t.button.insertAfter(t.element).click(function(){t[t.opened?"close":"open"]()})),t.options.autoOpen&&t.open(),t.element.keydown(function(n){n.keyCode===9&&t.close()}).keyup(function(){var n=u(t.element.val());t.color.equals(n)||(t.color=n,t._change())})),this},_setOption:function(t,i){var r=this;switch(t){case"disabled":i?r.dialog.addClass("ui-colorpicker-disabled"):r.dialog.removeClass("ui-colorpicker-disabled")}n.Widget.prototype._setOption.apply(r,arguments)},_setImageBackground:function(){this.image&&this.options.buttonColorize&&this.image.css("background-color",this.color.set?t("RGBA",this.color):"")},_setAltField:function(){if(this.options.altOnChange&&this.options.altField&&this.options.altProperties){for(var i,r=this.options.altProperties.split(","),t=0;t<=r.length;++t){i=n.trim(r[t]);switch(i){case"color":case"background-color":case"outline-color":case"border-color":n(this.options.altField).css(i,this.color.set?this.color.toCSS():"")}}this.options.altAlpha&&n(this.options.altField).css("opacity",this.color.set?this.color.getAlpha():"")}},_setColor:function(n){this.color=u(n);this.currentColor=this.color.copy();this._setImageBackground();this._setAltField()},setColor:function(n){this._setColor(n);this._change(this.color.set)},_generate:function(){var t=this,r,i;t._setColor(t.inline?t.options.color:t.element.val());r=typeof t.options.parts=="string"?e[t.options.parts]?e[t.options.parts]:e[t.inline?"inline":"popup"]:t.options.parts;t.parts={};n.each(r,function(n,i){l[i]&&(t.parts[i]=new l[i](t))});t.generated||(i=[],n.each(t.options.layout,function(n,r){t.parts[n]&&i.push({part:n,pos:r})}),n(p(i,function(n,t,i){var r=["ui-colorpicker-"+n.part+"-container"];return t>0&&r.push("ui-colorpicker-padding-left"),i>0&&r.push("ui-colorpicker-padding-top"),'<td  class="'+r.join(" ")+'"'+(n.pos[2]>1?' colspan="'+n.pos[2]+'"':"")+(n.pos[3]>1?' rowspan="'+n.pos[3]+'"':"")+' valign="top"><\/td>'})).appendTo(t.dialog).addClass("ui-dialog-content ui-widget-content"),t._initAllParts(),t._updateAllParts(),t.generated=!0)},_effectGeneric:function(t,i,r,u,f){var e=this;n.effects&&n.effects[e.options.showAnim]?t[i](e.options.showAnim,e.options.showOptions,e.options.duration,f):(t[e.options.showAnim==="slideDown"?r:e.options.showAnim==="fadeIn"?u:i](e.options.showAnim?e.options.duration:null,f),e.options.showAnim&&e.options.duration||f())},_effectShow:function(n,t){this._effectGeneric(n,"show","slideDown","fadeIn",t)},_effectHide:function(n,t){this._effectGeneric(n,"hide","slideUp","fadeOut",t)},open:function(){var t=this,i,e,o,r,s,u,f,h;t.opened||(t._generate(),i=t.element.offset(),e=n(window).height()+n(window).scrollTop(),o=n(window).width()+n(window).scrollLeft(),r=t.dialog.outerHeight(),s=t.dialog.outerWidth(),u=i.left,f=i.top+t.element.outerHeight(),u+s>o&&(u=Math.max(0,o-s)),f+r>e&&(f=i.top-r>=n(window).scrollTop()?i.top-r:Math.max(0,e-r)),t.dialog.css({left:u,top:f}),h=0,n(t.element[0]).parents().each(function(){var t=n(this).css("z-index");if((typeof t=="number"||typeof t=="string")&&t!==""&&!isNaN(t))return h=t,!1}),t.dialog.css("z-index",h+=100),t.overlay=t.options.modal?new n.ui.dialog.overlay(t):null,t._effectShow(this.dialog),t.opened=!0,t._callback("open",!0),n(function(){t._repaintAllParts()}))},close:function(){var n=this;n.currentColor=n.color.copy();n.changed=!1;n._effectHide(n.dialog,function(){n.dialog.empty();n.generated=!1;n.opened=!1;n._callback("close",!0)});n.overlay&&n.overlay.destroy()},destroy:function(){this.element.unbind();this.image!==null&&this.image.remove();this.button!==null&&this.button.remove();this.dialog!==null&&this.dialog.remove();this.overlay&&this.overlay.destroy()},_callback:function(n,i){var r=this,u,f;return r.color.set?(u={formatted:t(r.options.colorFormat,r.color)},f=r.color.getLAB(),f.a=f.a*2-1,f.b=f.b*2-1,i===!0&&(u.a=r.color.getAlpha(),u.rgb=r.color.getRGB(),u.hsv=r.color.getHSV(),u.cmyk=r.color.getCMYK(),u.hsl=r.color.getHSL(),u.lab=f),r._trigger(n,null,u)):r._trigger(n,null,{formatted:""})},_initAllParts:function(){n.each(this.parts,function(n,t){t.init&&t.init()})},_updateAllParts:function(){n.each(this.parts,function(n,t){t.update&&t.update()})},_repaintAllParts:function(){n.each(this.parts,function(n,t){t.repaint&&t.repaint()})},_change:function(n){this.color.set=n!==!1;this.changed=!0;switch(this.options.limit){case"websafe":this.color.limit(6);break;case"nibble":this.color.limit(16);break;case"binary":this.color.limit(2);break;case"name":var i=h(this.color);this.color.setRGB(r[i].r,r[i].g,r[i].b)}this.inline||(this.color.set?this.color.equals(u(this.element.val()))||this.element.val(t(this.options.colorFormat,this.color)):this.element.val(""),this._setImageBackground(),this._setAltField());this.opened&&this._repaintAllParts();this._callback("select")},_hoverable:function(n){n.hover(function(){n.addClass("ui-state-hover")},function(){n.removeClass("ui-state-hover")})},_focusable:function(n){n.focus(function(){n.addClass("ui-state-focus")}).blur(function(){n.removeClass("ui-state-focus")})},_getRegional:function(t){return n.colorpicker.regional[this.options.regional][t]!==undefined?n.colorpicker.regional[this.options.regional][t]:n.colorpicker.regional[""][t]}})})(jQuery);
/*
//# sourceMappingURL=jquery.colorpicker.min.js.map
*/